@using BlackMesa.Blog.Utilities
@using BlackMesa.Utilities
@model BlackMesa.Blog.Models.Entry

<script type="text/javascript">
    $(function () {
        // Initialize DateCreatedPicker
        $('#DateCreatedPicker').datetimepicker({
            language: 'en-US'
        });
        var dateCreatedPicker = $('#DateCreatedPicker').data('datetimepicker');
        
        // Initialize DateEditedPicker
        $('#DateEditedPicker').datetimepicker({
            language: 'en-US'
        });
        var dateEditedPicker = $('#DateEditedPicker').data('datetimepicker');
        
        // If we are about to create a new Entry, the initial value for the datetime fields should be the current date. 
        // If we are changing an existing entry we want the datetime fields to be initialized we the data from the database.
        @{
            long dateCreatedToUse;
            long dateEditedToUse;
            if (Model == null)
            {
                dateCreatedToUse = DateTime.Now.ToJavaScriptMilliseconds();
                dateEditedToUse = DateTime.Now.ToJavaScriptMilliseconds();
            }
            else
            {
                dateCreatedToUse = Model.DateCreated.ToJavaScriptMilliseconds();
                dateEditedToUse = Model.DateEdited.ToJavaScriptMilliseconds();
            }
        }
        
        dateCreatedPicker.setLocalDate(new Date(@dateCreatedToUse));
        dateEditedPicker.setLocalDate(new Date(@dateEditedToUse));



        // Initialize TagHandler //
        $(".tag-input-form").tagHandler({
            getData: { id: '@(Model != null ? Model.Id : 0)' },
            getURL: '@Url.Action("Json", "Tag", new { language = "de" })',
            allowAdd: true,
            autocomplete: true,
        });


        
        // Initialize AutoGrowTextarea // 
        $('textarea').autoGrowTextArea();
        
    });

    
</script>



